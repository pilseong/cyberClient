<!DOCTYPE html>
<html lang="ko">
  <head>
    <!--   <meta charset="utf-8"> -->
    <meta name="Referrer" content="origin" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, user-scalable=yes"
    />

    <title>서울시 상수도사업본부</title>

    <!-- css  -->
    <link rel="stylesheet" href="/public/css/arisu-mw.css" />

    <!-- js  -->
    <script src="/src/jquery-3.6.0.min.js"></script>
    <script src="/src/uiux-common.js"></script>

    <script>
      try {
        document.domain = "seoul.go.kr";
      } catch (e) {}

      function init() {
        document.title = "온라인민원 | 서울시 상수도사업본부"; // 현재페이지 제목

        $('#result-list').hide();
        //searchPoofPayment();/
        parentCall();
        scrollTop();
      }

      function parentCall() {
        setTimeout(function () {
          try {
            parent.setResponsive();
          } catch (e) {}
        }, 110);
      }

      function scrollTop() {
        try {
          parent.scrollTop();
        } catch (e) {}
      }

      function searchPoofPayment(minwonNm) {
        var url = "listCitizenCvplDfn.html";
        var queryString = $("form[name='formUnityList']").serialize();
        $.ajax({
          url: url,
          type: "get",
          async: false,
          data: queryString,
          dataType: "json",
          error: function (xhr, status, error) {
            alert_msg(error);
          },
          success: function (data) {
            console.log(data);
            var inHtml = "";

            if (data.length < 1) {
              inHtml += "<tr>";
              inHtml +=
                "<td colspan='2' style='text-align:center;'>조회된 자료가 없습니다.</td>";
              inHtml += "</tr>";
            } else {
              var i = 0;
              for (i = 0; i < data.length; i++) {
                var minwonDfn = "";
                var setminwonDfn = "";
                var setminwonDfnSplit0 = "";
                var setminwonDfnSplit1 = "";
                var setminwonDfnSplit2 = "";
                if (data[i].minwonDfn) {
                  minwonDfn = data[i].minwonDfn;
                  var minwonDfnSplit = minwonDfn.split("/");

                  if (minwonDfnSplit.length > 1) {
                    for (var j = 0; j < minwonDfnSplit.length; j++) {
                      if (minwonDfnSplit[j] == "" ||  minwonDfnSplit[j] == null) {
                        continue;
                      } else {
                        if (j == minwonDfnSplit.length - 1) {
                          setminwonDfn += minwonDfnSplit[j];
                        } else {
                          minwonDfnSplit[j + 1] != ""
                            ? (setminwonDfn += minwonDfnSplit[j] + "<br>")
                            : (setminwonDfn += minwonDfnSplit[j]);
                        }
                      }
                    }
                  } else {
                    setminwonDfn = minwonDfnSplit[0];
                  }
                }
                var minwonCd  = data[i].minwonCd;
                var uiPath    = data[i].uiPath;
                var minwonNm  = data[i].minwonNm;
                
                var node = "" +
                "<div id=\"list-mw" + (i+1) +"\" class=\"row\">" + 
                  "<div class=\"tit-mw-h3\"><a href=\"javascript:void(0);\" onClick=\"showHideLayer('#list-mw" + (i+1) +"');\"  class=\"on\" title=\"닫기\">" + data[i].minwonNm + "</a></div>" +
                  "<div class=\"form-mw-box display-none row\">" + setminwonDfn + 
                    "<div class=\"info-btn-wrap row\">" +
                      "<button type=\"button\" class=\"btn btnS\" onclick=\"location.href='" + uiPath +".do?userKey=${userKey}&minwonCd=" + minwonCd + "';\">민원신청</button>" +
                      "<button type=\"button\" class=\"btn btnS btnDGray\" onClick=\"showHideLayer('#list-mw" + (i+1) +"');\">닫기</button>" +
                    "</div>" +
                  "</div>" +
                "</div>";
                inHtml += node;
              }
            }
            
            $("#result-default").hide();
            $("#result-list").show();
            $("#result-list").append(inHtml);
            $("#searchMinwonNm").val("");
            $("#minwonNm").val("");
          },
        });
      }

      // 민원별 분류 및 검색
      function clickCategory(categoryCd) {
        $(".listTit").removeClass("on");
        $(".CompCon").css("display", "none");

        var minwonNm = $("#searchMinwonNm").val();
        if (categoryCd == "M") {
          $("#tabTitle").text("주요민원");
        } else if (categoryCd == "C") {
          $("#tabTitle").text("요금관련");
        } else if (categoryCd == "W") {
          $("#tabTitle").text("급수공사");
        } else if (categoryCd == "A") {
          $("#tabTitle").text("증명서/기타");
        } else {
          $("#tabTitle").text("전체");
        }

        $("#tableData dt, #tableData dd").each(function () {
          var o = $(this);
          if (categoryCd == "S") {
            // 검색
            if (o[0].id) {
              // id가 있는 경우(민원이름dt태그)
              var searchStr = $(o.find("a:first-child")[0]).text();
            } else {
              var searchStr = $(o).text();
            }
            if (searchStr && searchStr.match(minwonNm)) {
              if (o[0].id) {
                o.show(); // dt태그일경우 본인을 show
              } else {
                o.prev().show(); // dd태그일 경우 prev(dt태그)를 show
              }
            } else {
              o.hide();
            }
          } else {
            var thisId = o.attr("id");
            if (thisId && categoryCd == "") {
              o.show();
            } else {
              if (thisId && thisId.indexOf("trCategory" + categoryCd) == 0) {
                o.show();
              } else if (
                thisId &&
                categoryCd == "M" &&
                thisId == "trCategoryEB99"
              ) {
                o.show();
              } else {
                o.hide();
              }
            }
          }
          // 로딩 시, 사이즈 재조정
          parentCall();
        });
      }
    </script>
  </head>

  <body onload="init();">
    <!-- 콘텐츠 -->
    <div class="contents-mw row">
      <div class="tit-mw-h1">
        <span class="txStrongColor">자주 찾는 민원신청</span>
        <span class="m-hide">서비스입니다.</span>
      </div>

      <!-- 민원바로가기 -->
      <div class="link-mw-wrap row">
        <div class="link-mw row">
          <ul>
            <li>
              <a onclick="location.href='citizenNmchngeForm.html?userKey=${userKey}&minwonCd=B04';"
                ><img
                  src="public/images/ico-q-01.png"
                  alt="소유자(사용자) 명의변경"
                /><span>소유자(사용자)<br />명의변경</span></a
              >
            </li>
            <li>
              <a onclick="location.href='citizenNmchngeForm.html?userKey=${userKey}&minwonCd=B25';"
                ><img
                  src="public/images/ico-q-02.png"
                  alt="수도요금 바로알림신청"
                /><span>수도요금<br />바로알림신청</span></a
              >
            </li>
            <li>
              <a onclick="location.href='citizenNmchngeForm.html?userKey=${userKey}&minwonCd=B14';"
                ><img
                  src="public/images/ico-q-03.png"
                  alt="자동납부(계좌) 신청/해지"
                /><span>자동납부(계좌)<br />신청/해지</span></a
              >
            </li>
            <li>
              <a onclick="location.href='citizenNmchngeForm.html?userKey=${userKey}&minwonCd=B19';"
                ><img
                  src="public/images/ico-q-04.png"
                  alt="전자고지 신청/해지"
                /><span>전자고지<br />신청/해지</span></a
              >
            </li>
            <li>
              <a href="#"
                ><img
                  src="public/images/ico-q-05.png"
                  alt="누수요금 적용신청"
                /><span>누수요금<br />적용신청</span></a
              >
            </li>
            <li>
              <a href="05.html"
                ><img
                  src="public/images/ico-q-06.png"
                  alt="계량기 교체신청"
                /><span>계량기<br />교체신청</span></a
              >
            </li>
          </ul>
        </div>
        <div class="link-mw-all">
          <a onclick="searchPoofPayment()">
            <span class="ico-more-all"> 전체보기</span>
          </a>
        </div>
      </div>
      <!-- //link-mw-wrap -->

      <!-- 민원검색 -->
      <div class="sch-mw-wrap row">
        <form>
          <div class="sch-mw row">
            <ul>
              <li class="col-tx">
                <label for="sch-mw-tx" class="sr-only">검색어 입력</label>
                <input
                  id="sch-mw-tx"
                  type="text"
                  title="검색어 입력"
                  placeholder="무엇을 도와드릴까요?"
                />
              </li>
              <li class="col-btn">
                <label for="sch-mw-btn" class="sr-only">검색버튼</label>
                <button
                  id="sch-mw-btn"
                  type="button"
                  title="검색버튼"
                  onclick="clickCategory('S')"
                >
                  <span class="sr-only">검색버튼</span>
                </button>
              </li>
            </ul>
          </div>
          <div class="sch-mw-tag row">
            <a href="#">
              <span>#명의변경</span>
            </a>
            <a href="#">
              <span>#자동납부</span>
            </a>
            <a href="#">
              <span>#요금</span>
            </a>
            <a href="#">
              <span>#계량기</span>
            </a>
            <a href="#">
              <span>#수질</span>
            </a>
            <a href="#">
              <span>#누수</span>
            </a>
            <a href="index.html">
              <span>#홈</span>
            </a>
          </div>
        </form>
      </div>

      <!-- 민원서비스 바로가기 -->
      <div class="g-mw-wrap row" id="result-default">
        <div class="col col-2">
          <div class="g-mw-box row">
            <h4>
              <span class="i-99">이사를 하셨나요?</span>
            </h4>
            <a href="01.html">
              <span>소유자(사용자)명의변경 신고</span>
            </a>
            <a href="02.html">
              <span>자동납부(계좌) 신규/해지</span>
            </a>
            <a href="03.html">
              <span>수도요금 바로알림 신규/변경/해지</span>
            </a>
            <a href="04.html">
              <span>전자고지 신규/변경/해지</span>
            </a>
          </div>
        </div>

        <div class="col col-2">
          <div class="g-mw-box row">
            <h4>
              <span class="i-99">수도계량기 서비스신청</span>
            </h4>
            <a href="05.html">
              <span>수도계량기 교체 신청</span>
            </a>
            <a href="index.html">
              <span>수도계량기 이설 신청</span>
            </a>
            <a href="index.html">
              <span>자가검침 신규/변경/해지</span>
            </a>
            <a href="index.html">
              <span>검침일 안내서비스 신청</span>
            </a>
          </div>
        </div>
      </div>
      <div class="list-mw row" id="result-list">
        <h2><span class="i-99">민원신청 서비스</span></h2>
      </div>
    </div>
    <!-- //list-mw -->
  </body>
</html>
